â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PATIENT DATA AUTO-FETCH FLOW                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Action    â”‚
â”‚ Click "Enter    â”‚
â”‚   Results"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TestResultEntry Component Loads                    â”‚
â”‚  â€¢ Receives bill object with patient_mrno                       â”‚
â”‚  â€¢ Receives appointment_id (if available)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           useEffect Hook Triggers Patient Data Fetch            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              patientDataAPI.fetchPatientInfo()                  â”‚
â”‚                  (Centralized API Call)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                                      â”‚
         â–¼                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  STRATEGY 1:         â”‚                                        â”‚
â”‚  Appointments Table  â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                        â”‚
â”‚ â€¢ Search by          â”‚                                        â”‚
â”‚   appointment_id     â”‚                                        â”‚
â”‚ â€¢ Search by mrno     â”‚                                        â”‚
â”‚                      â”‚                                        â”‚
â”‚ Returns:             â”‚                                        â”‚
â”‚ âœ“ patient_name       â”‚                                        â”‚
â”‚ âœ“ age (if exists)    â”‚                                        â”‚
â”‚ âœ“ gender (if exists) â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
           â”‚                                                    â”‚
           â”‚ Found? â”€â”€Yesâ”€â”€> Return Data â”€â”€â”                   â”‚
           â”‚                                â”‚                   â”‚
           No                               â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â–¼                                â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                   â”‚
â”‚  STRATEGY 2:         â”‚                   â”‚                   â”‚
â”‚  Users Table         â”‚                   â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
â”‚ â€¢ Direct mrno match  â”‚                   â”‚                   â”‚
â”‚ â€¢ UUID match (id)    â”‚                   â”‚                   â”‚
â”‚ â€¢ Text cast match    â”‚                   â”‚                   â”‚
â”‚                      â”‚                   â”‚                   â”‚
â”‚ Returns:             â”‚                   â”‚                   â”‚
â”‚ âœ“ name               â”‚                   â”‚                   â”‚
â”‚ âœ“ age (or calc from â”‚                   â”‚                   â”‚
â”‚   date_of_birth)     â”‚                   â”‚                   â”‚
â”‚ âœ“ gender             â”‚                   â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â”‚ Found? â”€â”€Yesâ”€â”€> Return Data â”€â”€â”¤                   â”‚
           â”‚                                â”‚                   â”‚
           No                               â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â–¼                                â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                   â”‚
â”‚  STRATEGY 3:         â”‚                   â”‚                   â”‚
â”‚  Walk-in Patients    â”‚                   â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
â”‚ â€¢ Search by mrno     â”‚                   â”‚                   â”‚
â”‚                      â”‚                   â”‚                   â”‚
â”‚ Returns:             â”‚                   â”‚                   â”‚
â”‚ âœ“ name               â”‚                   â”‚                   â”‚
â”‚ âœ“ age                â”‚                   â”‚                   â”‚
â”‚ âœ“ gender             â”‚                   â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â”‚ Found? â”€â”€Yesâ”€â”€> Return Data â”€â”€â”¤                   â”‚
           â”‚                                â”‚                   â”‚
           No                               â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â–¼                                â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                   â”‚
â”‚  STRATEGY 4:         â”‚                   â”‚                   â”‚
â”‚  Bill Object         â”‚                   â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
â”‚ â€¢ Check bill object  â”‚                   â”‚                   â”‚
â”‚   for patient_name,  â”‚                   â”‚                   â”‚
â”‚   patient_age,       â”‚                   â”‚                   â”‚
â”‚   patient_gender     â”‚                   â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â”‚ Found? â”€â”€Yesâ”€â”€> Return Data â”€â”€â”¤                   â”‚
           â”‚                                â”‚                   â”‚
           No                               â”‚                   â”‚
           â”‚                                â”‚                   â”‚
           â–¼                                â–¼                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
    â”‚ No Data      â”‚              â”‚  Data Found!   â”‚           â”‚
    â”‚ Found        â”‚              â”‚  Update Form   â”‚           â”‚
    â”‚              â”‚              â”‚  State         â”‚           â”‚
    â”‚ Log Error    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    â”‚ Show Hint    â”‚                       â”‚                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                   â”‚
                                           â–¼                   â”‚
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                                  â”‚ Form Fields    â”‚           â”‚
                                  â”‚ Auto-Filled:   â”‚           â”‚
                                  â”‚ â€¢ Name âœ“       â”‚           â”‚
                                  â”‚ â€¢ Age âœ“        â”‚           â”‚
                                  â”‚ â€¢ Gender âœ“     â”‚           â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                                                                â”‚
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Fallback: Manual    â”‚
                        â”‚  Multi-Table Search  â”‚
                        â”‚  (if API returns     â”‚
                        â”‚   incomplete data)   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         KEY FEATURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Multiple Search Strategies - Tries 4 different approaches
âœ“ Format Handling - Works with UUID, string, and number MRNOs
âœ“ Early Exit - Returns immediately when complete data found
âœ“ Comprehensive Logging - Detailed console output for debugging
âœ“ Graceful Degradation - Falls back to manual entry if fetch fails
âœ“ Age Calculation - Computes age from date_of_birth if needed
âœ“ Source Tracking - Knows which table provided the data

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                      CONSOLE LOG FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” Starting patient data fetch...
ğŸ” Fetching patient info for: { mrno: "12345", appointmentId: null }
ğŸ” Searching appointments table...
   â†“ (if not found)
ğŸ” Searching users table...
   â†“ (if found)
âœ… Found in users: { name: "John Doe", age: 35, gender: "Male" }
âœ… Patient data retrieved: { name: "John Doe", ... }
âœ… Got patient data from API: { name: "John Doe", ... }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
